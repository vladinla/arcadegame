var Engine=(function(global){var doc=global.document,win=global.window,canvas=doc.querySelector('canvas'),ctx=canvas.getContext('2d'),lastTime;var topBuffer=20;var bottomBuffer=88;canvas.width=5*101;canvas.height=topBuffer+6*83+bottomBuffer;function main(){var now=Date.now(),dt=(now-lastTime)/1000.0;update(dt);render();lastTime=now;win.requestAnimationFrame(main);}function init(){reset();lastTime=Date.now();main();}function update(dt){updateEntities(dt);}function updateEntities(dt){gameBoard.update();charmsManager.update();allEnemies.forEach(function(enemy){enemy.update(dt);});player.update();scoreBoard.update();}function render(){renderGameBoard();charmsManager.render();renderEntities();scoreBoard.render();gameRulesDialog.render();hintsDialog.render();attributionDialog.render();attributionSoundsDialog.render();gameOverDialog.render();}function renderGameBoard(){var rowImages=['images/stone-block.png','images/stone-block.png','images/stone-block.png','images/stone-block.png','images/grass-block.png','images/grass-block.png',],numRows=6,numCols=5,row,col;for(row=0;row<numRows;row++){for(col=0;col<numCols;col++){ctx.drawImage(Resources.get(rowImages[row]),col*101,topBuffer+row*83);}}}function renderEntities(){allEnemies.forEach(function(enemy){enemy.render();});player.render();}function reset(){}Resources.load(['images/stone-block.png','images/grass-block.png','images/char-boy.png','images/char-cat-girl.png','images/char-horn-girl.png','images/char-pink-girl.png','images/char-princess-girl.png','images/enemy-green.png','images/enemy-blue.png','images/enemy-yellow.png','images/enemy-purple.png','images/enemy-red.png','images/charm-green.png','images/charm-blue.png','images/charm-yellow.png','images/charm-purple.png','images/charm-red.png',]);Resources.onReady(init);global.ctx=ctx;global.topBuffer=topBuffer;global.bottomBuffer=bottomBuffer;})(this);